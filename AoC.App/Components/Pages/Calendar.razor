@page "/"
@page "/calendar"
@using AoC.App.Models

<div class="calendar-page">
    <div class="year-picker">
        <select @bind="_selectedYear">
            @foreach (var year in CalendarDay.AvailableYears)
            {
                <option value="@year">@year</option>
            }
        </select>
    </div>

    <div class="calendar-grid">
        @foreach (var day in _calendarDays)
        {
            <button class="calendar-day @(CalendarDay.IsDayAvailable(_selectedYear, day.Day) ? "is-available" : "is-not-available")" @onclick="() => OpenDay(day)">
                @day.DisplayText
            </button>
        }
    </div>
</div>

@code {
    private int _selectedYear = CalendarDay.LatestAvailableYear;

    private readonly List<CalendarDay> _calendarDays = Enumerable.Range(1, 25)
        .Select(day => new CalendarDay { Day = day }).ToList();

    private void OpenDay(CalendarDay day)
    {
        Console.WriteLine($"Opening day {day.Day} for year {_selectedYear}");
    }
}